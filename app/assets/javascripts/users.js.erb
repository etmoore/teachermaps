$(document).ready(function(){
  
  // Hide by default
  $('#resource-controls').hide();
  // Shows resource controls when viewing resources
  $('.resource-toggle-control').click(function(){
  	$('#resource-controls').show();
  });
  // Hides resource controls when viewing map
  $('.map-toggle-control').click(function(){
  	$('#resource-controls').hide()
  });


  //////////////////////////////
  //
  // Remove Map
  //
  //////////////////////////////

  $(document)
  .on('ajax:error', '.users_map_destroy', function(event, data, status, xhr) {
    pushFlash({message:"Error deleting Map", state: 'error', fadeOut: 5000});
  })
  .on('ajax:success', '.users_map_destroy', function(event, data, status, xhr) {
    $('#users_maps_table').html(data);
  });

  //////////////////////////////
  //
  // Add Map
  //
  //////////////////////////////

  $(document).on('click', '#users_create_map', function(e) {

      var actionUrl = $(this).attr('action-url');

      if(actionUrl == undefined) return false;

      $.ajax({
          type: 'POST',
          url: actionUrl,
          dataType: 'html',
          success: function (response) {
              $('#users_maps_table').html(response);
          },
          error: function (xhr, ajaxOptions, thrownError) {
              pushFlash({message:'Error adding a Map Assessment', state: 'error', fadeOut: 5000});
          }
      });

      e.stopPropagation();
  });

});



